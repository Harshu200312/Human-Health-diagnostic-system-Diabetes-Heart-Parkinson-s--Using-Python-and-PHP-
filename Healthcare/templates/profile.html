<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- basic -->
    <title>News</title>
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css" />
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
    <!-- Responsive -->
    <link rel="stylesheet" href="../static/css/responsive.css" />
    <!-- fevicon -->
    <link rel="icon" href="../static/images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="../static/css/jquery.mCustomScrollbar.min.css" />
    <!-- Tweaks for older IEs -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="../static/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="../static/css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen" />
  </head>
  <body>
    <!-- header section start -->
    <div class="header_section header_bg">
      <div class="container-fluid">
        <div class="main">
          <div class="logo">
            <div class="logo"><a href="/"><span style="color: white; font-size: xx-large; font-weight: bolder;">Harsh </span><span style="color: #873fd4; font-size: xx-large; font-weight: bolder;">Healthcare</span></a></div>
          </div>
          <div class="menu_text">
            <ul>
              <div class="togle_">
                <div class="menu_main">
                  <ul>
                    <li>{% if 'user_id' not in session %}<a href="/login">Login</a>{% else %}{{ username }}{% endif %}</li>
                    <li><a href="#"><i class="fa fa-search" aria-hidden="true"></i></a></li>
                  </ul>
                </div>
              </div>
              <div id="myNav" class="overlay">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <div class="overlay-content">
                  <a href="/">Home</a>
                  <a href="/diabetes">Diabetes</a>
                  <a href="/heart_disease">Heart Diseases</a>
                  <a href="/parkinsons">Parkinson's</a>
                  <a href="about">About</a>
                  {% if 'user_id' in session %}
                      <a href="/profile">Profile</a>
                      <a href="/logout">Logout</a>
                  {% else %}
                      <a href="/login">Login</a>
                  {% endif %}
              </div>
              </div>
              <span class="navbar-toggler-icon"></span>
              <span onclick="openNav()"><img src="../static/images/toogle-icon.png" class="toggle_menu" /></span>
              <span onclick="openNav()"><img src="../static/images/toogle-icon1.png" class="toggle_menu_1" /></span>
            </ul>
          </div>
        </div>
      </div>
      <!-- banner section start -->
      <div class="container">
        <div class="about_taital_main">
          <h2 class="about_tag">My History.</h2>
          <div class="about_menu">
            <ul>
              <li>
                <a href="/">Home</a>
              </li>
              <li>Profile</li>
            </ul>
          </div>
        </div>
      </div>
      <!-- banner section end -->
    </div>
    <!-- header section end -->

    
<!-- Profile section start -->
<div class="container">
  <div class="row">
      <div class="col-md-6">
          <h3 class="about_title">Profile</h3>
          <div class="profile-details">
              {% if user %}
                  <p><strong>First Name: </strong>
                    <span id="firstName">{{ user.first_name }}</span>
                    <input type="text" id="firstNameInput" value="{{ user.first_name }}" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('firstName')">Edit</button>
                </p>
                <p><strong>Last Name: </strong>
                    <span id="lastName">{{ user.last_name }}</span>
                    <input type="text" id="lastNameInput" value="{{ user.last_name }}" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('lastName')">Edit</button>
                </p>
                <p><strong>Username: </strong> 
                  <span id="username">{{ user.username }}</span>
                  <input type="text" id="usernameInput" value="{{ user.username }}" class="form-control" style="display: none;">
                  <button type="button" class="btn btn-link" onclick="editField('username')">Edit</button>
              </p>
              <p><strong>Email: </strong> 
                  <span id="email">{{ user.email }}</span>
                  <input type="email" id="emailInput" value="{{ user.email }}" class="form-control" style="display: none;">
                  <button type="button" class="btn btn-link" onclick="editField('email')">Edit</button>
              </p>
                <p><strong>Phone Number: </strong>
                    <span id="phoneNumber">{{ user.phone_number }}</span>
                    <input type="text" id="phoneNumberInput" value="{{ user.phone_number }}" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('phoneNumber')">Edit</button>
                </p>
                <p><strong>Birthdate: </strong>
                    <span id="birthdate">{{ user.birthdate }}</span>
                    <input type="date" id="birthdateInput" value="{{ user.birthdate }}" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('birthdate')">Edit</button>
                </p>
                <p><strong>Gender: </strong>
                    <span id="gender">{{ user.gender }}</span>
                    <input type="text" id="genderInput" value="{{ user.gender }}" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('gender')">Edit</button>
                </p>
                <p><strong>Password: </strong>
                    <!-- Update password field to use type password for security -->
                    <input type="password" id="passwordInput" value="" class="form-control" style="display: none;">
                    <button type="button" class="btn btn-link" onclick="editField('password')">Edit</button>
                </p>                
                  <!-- Add more user details here -->
              {% else %}
                  <p>User details not available.</p>
              {% endif %}
          </div>
          <div class="edit-profile">
              <button type="button" onclick="submitForm()" class="btn btn-primary" style="display: none;">Submit</button>
          </div>
      </div>
      <div class="col-md-6">
          <div class="disease-reports">
              <h3>Diabetes Reports:</h3>
              <table class="table">
                  <thead>
                      <tr>
                          <th>#</th>
                          <th>Result</th>
                          <!-- Add more columns if needed -->
                      </tr>
                  </thead>
                  <tbody>
                      {% for report in diabetes_reports %}
                          <tr>
                              <td>{{ loop.index }}</td>
                              <td>{{ report.result }}</td>
                              <!-- Display other diabetes report details -->
                          </tr>
                      {% endfor %}
                  </tbody>
              </table>
              <!-- Display heart disease and Parkinson's disease reports similarly -->
          </div>
      </div>
  </div>
</div>
<!-- Profile section end -->

<script>
  function editField(field) {
      var fieldElement = document.getElementById(field);
      var inputElement = document.getElementById(field + 'Input');
      var submitBtn = document.querySelector('.edit-profile button');

      fieldElement.style.display = 'none';
      inputElement.style.display = 'block';
      submitBtn.style.display = 'block';
      inputElement.focus();
  }

  function submitForm() {
    var usernameInput = document.getElementById('usernameInput');
    var emailInput = document.getElementById('emailInput');
    var firstNameInput = document.getElementById('firstNameInput');
    var lastNameInput = document.getElementById('lastNameInput');
    var phoneNumberInput = document.getElementById('phoneNumberInput');
    var birthdateInput = document.getElementById('birthdateInput');
    var genderInput = document.getElementById('genderInput');
    var passwordInput = document.getElementById('passwordInput');

    // Fetch values from inputs and update the display
    document.getElementById('username').innerText = usernameInput.value;
    document.getElementById('email').innerText = emailInput.value;
    document.getElementById('firstName').innerText = firstNameInput.value;
    document.getElementById('lastName').innerText = lastNameInput.value;
    document.getElementById('phoneNumber').innerText = phoneNumberInput.value;
    document.getElementById('birthdate').innerText = birthdateInput.value;
    document.getElementById('gender').innerText = genderInput.value;

    // Make an AJAX call to update the user details in the backend
    fetch('/update-profile', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            username: usernameInput.value,
            email: emailInput.value,
            first_name: firstNameInput.value,
            last_name: lastNameInput.value,
            phone_number: phoneNumberInput.value,
            birthdate: birthdateInput.value,
            gender: genderInput.value,
            password: passwordInput.value // Make sure to handle password securely on the server-side
            // Add more fields if needed
        })
    }).then(response => {
        // Handle the response as needed
        // For instance, show a success message or handle errors
    }).catch(error => {
        // Handle any error that occurs during the fetch request
    });

    // Hide the input fields and display the updated user details
    usernameInput.style.display = 'none';
    document.getElementById('username').style.display = 'inline';

    emailInput.style.display = 'none';
    document.getElementById('email').style.display = 'inline';

    firstNameInput.style.display = 'none';
    document.getElementById('firstName').style.display = 'inline';

    lastNameInput.style.display = 'none';
    document.getElementById('lastName').style.display = 'inline';

    phoneNumberInput.style.display = 'none';
    document.getElementById('phoneNumber').style.display = 'inline';

    birthdateInput.style.display = 'none';
    document.getElementById('birthdate').style.display = 'inline';

    genderInput.style.display = 'none';
    document.getElementById('gender').style.display = 'inline';

    passwordInput.style.display = 'none'; // Password field should not be displayed after submission
    document.querySelector('.edit-profile button').style.display = 'none';
}
</script>


         
    <!-- footer section start -->
    <div class="footer_section layout_padding">
        <div class="container">
          <div class="footer_section_2">
            <div class="row">
              <div class="col-lg-3 col-sm-6">
                <h2 class="useful_text">Resources</h2>
                <div class="footer_menu">
                  <ul>
                    <li>
                      <a href="#">What we do</a>
                    </li>
                    <li>
                      <a href="#">Media</a>
                    </li>
                    <li>
                      <a href="#">Travel Advice</a>
                    </li>
                    <li>
                      <a href="#">Protection</a>
                    </li>
                    <li>
                      <a href="#">Care</a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-lg-3 col-sm-6">
                <h2 class="useful_text">About</h2>
                <p class="footer_text">Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various</p>
              </div>
              <div class="col-lg-3 col-sm-6">
                <h2 class="useful_text">Contact Us</h2>
                <div class="location_text">
                  <ul>
                    <li>
                      <a href="#">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>
                        <span class="padding_15">Location</span>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fa fa-phone" aria-hidden="true"></i>
                        <span class="padding_15">Call +91 8097837008 </span>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                        <span class="padding_15">harsh@vstube.com</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-lg-3 col-sm-6">
                <h2 class="useful_text">countrys</h2>
                <div class="map_image">
                  <img src="../static/images/map-bg.png" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- footer section end -->
  
      <!-- copyright section start -->
      <div class="copyright_section">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <p class="copyright_text">
                <p class="copyright_text">Â© 2023 All Rights Reserved. By <a href="https://profile.vstube.in" target="_blank"><span style="color: #873fd4;">Harshada Panmand</span></a></p>
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- copyright section end -->
  
      <!-- Include Bootstrap JS and jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
      <!-- JavaScript for opening/closing the navigation menu -->
      <script>
        function openNav() {
          document.getElementById('myNav').style.width = '100%'
        }
        
        function closeNav() {
          document.getElementById('myNav').style.width = '0%'
        }
      </script>
    </body>
  </html>
  